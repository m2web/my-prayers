<!--markdown-->
# Shortcodes Refactoring Guidelines

**From Codex Refactoring PR on WSL2**
This document outlines recommended conventions and refactoring suggestions for the Hugo shortcodes in this directory.

## 1. File Naming

- Use lowercase, hyphen-separated (kebab-case) filenames, e.g. `todays-verse.html`.
- Avoid special characters, underscores, or concatenated words (e.g. rename `todosmaillink.html` to `todos-mail-link.html`).

## 2. Comment Style

- Use Go template comments for documentation or notes inside shortcodes:
  
  ```go-html-template
  {{/* this is a Go template comment */}}
  ```
  
- Avoid HTML comments (`<!-- ... -->`) within a shortcode template.

## 3. DRY and Shared Logic

- Common code patterns (e.g. computing a daily index by year-day, building an offset map for weekdays) should be extracted into a reusable partial or template to reduce duplication.

## 4. Indentation and Formatting

- Use two spaces for HTML indent levels and template blocks and align closing tags and `end` statements appropriately.

## 5. Data

- Prefer `keys` or direct `.Site.Data` traversal instead of `os.ReadDir` when possible. Hugo automatically loads data files under `data/`.

## 6. Safe HTML

- Always sanitize user-generated or external data with `| safeHTML` when embedding into HTML.

## 7. Future Refactors

- Consolidate the `todays-*.html` shortcodes into a generic template or partial parameterized by data source and title.
- Replace repeated `if/else if` ladders (e.g. day-of-week branching) with a lookup map (`dict`) and `cond` for clearer logic.

---  
_Generated by a refactoring PR; please review and iterate on these guidelines before applying further changes.
